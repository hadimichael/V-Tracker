<!DOCTYPE html>
<html>
	
	<head>
		
		<title>Vehicle Tracker</title>
		
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
		
		<!-- set apple mobile settings for quicker debugging -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
			
		<!-- general css styling -->
		<link rel="stylesheet" href="styles/styles.css" type="text/css" />
				
		<!-- iPad/iPhone specific css below -->
		<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="styles/ipad.css" type="text/css" />		
		<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="styles/iphone.css" type="text/css" />
		
		<!-- js files: you would NEVER have so many separate files if you were serving the app through the internet! -->
		<!-- js helper scripts -->
		<script type="text/javascript" charset="utf-8" src="scripts/scripts.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/compatibility.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/geolocation.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/accelerometer.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/compass.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/gyroscope.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/storage.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/notifications.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/localisation.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/pathfit.js"></script>
			
		<!-- cordova dependancies + plugins -->
		<script type="text/javascript" charset="utf-8" src="libraries/cordova-1.6.1.js"></script>
		<script type="text/javascript" charset="utf-8" src="libraries/LocalNotification.js"></script>
	
		<!-- other library dependancies -->
		<script type="text/javascript" charset="utf-8" src="libraries/modernizr-2.5.3.js"></script>
		<script type="text/javascript" charset="utf-8" src="libraries/numeric-1.0.2.js"></script>
		
		<!-- jQuery.mobile dependancies -->		
		<link rel="stylesheet" href="jquery/jquery.mobile-1.1.1.css" type="text/css" />
		<script type="text/javascript" src="jquery/jquery-1.7.2.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/jquery-mods.js"></script>
		<script type="text/javascript" src="jquery/jquery.mobile-1.1.1.js"></script>			
		<!-- jQuery.flot dependancies -->
		<script type="text/javascript" src="libraries/flot/jquery.flot.js"></script>
		
		<!-- Google Maps dependancies -->
		<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAmcxvwNRTOiviRdsJgGkdkOnnBMjd2BVY&sensor=true"></script>	
			
		<!-- onLoad scripts -->	
		<script type="text/javascript">
			function onBodyLoad() {	
				document.addEventListener("deviceready", onDeviceReady, false);
			}
			
			function onDeviceReady() {
				//We're ready to roll
				checkBrowserCompatibilities();
				storage.init();
				
				document.addEventListener("pause", onPause, false);
				document.addEventListener("resume", onResume, false);
			}
			
			function onPause() {
				//tell the user if GPS is still ON when the application is paused
				console.log("Device paused!");
				if (geolocationObj.watchID) {notifications.localTimedAlert(7000);}
			}
			
			function onResume() {
				console.log("Device resumed!");
				notifications.clear();
			}
		</script>
			
	</head>

	<body onload="onBodyLoad()">
		
		<!-- Start of startpage -->
		<div data-role="page" id="startpage" data-theme="c">
			
			<!-- header -->
			<div data-role="header" data-position="fixed">
				<h1>Vehicle Tracker</h1>
				<div data-role="navbar">
					<ul> 
						<li><a href="#startpage" class="ui-btn-active ui-state-persist" data-prefetch="true">Start</a></li>
						<li><a href="#debugpage" data-prefetch="true">Debug</a></li>
						<li><a href="#infopage" data-prefetch="true">Info</a></li>
					</ul>
				</div>
			</div><!-- /header -->
			
			<div data-role="content">				
				<h3>What would you like to do?</h3>
				<a data-role="button" href="javascript:route.learnNew();" data-theme="b" data-icon="plus">Learn a new route</a>
				<a data-role="button" href="javascript:findNearbyRoutes();" data-icon="search">Find nearby routes</a>
			</div>
			
		</div><!-- /startpage -->
		
		<!-- Start of debugpage -->
		<div data-role="page" id="debugpage" data-theme="c">
			
			<!-- header -->
			<div data-role="header" data-position="fixed">
				<h1>Vehicle Tracker</h1>
				<div data-role="navbar">
					<ul> 
						<li><a href="#startpage" data-prefetch="true">Start</a></li>
						<li><a href="#debugpage" class="ui-btn-active ui-state-persist" data-prefetch="true">Debug</a></li>
						<li><a href="#infopage" data-prefetch="true">Info</a></li>
					</ul>
				</div>
			</div><!-- /header -->
			
			<!-- content -->
			<div data-role="content" data-fullscreen="true">
				<h3 style="margin-top: 0;">Data Collection</h3>					
				<div data-role="controlgroup" data-type="horizontal">
					<a href="javascript:dataCollection.init();" data-role="button" data-icon="">Init</a>
					<a href="javascript:dataCollection.start();" data-role="button" data-icon="arrow-r">Collect</a>
					<a href="javascript:dataCollection.stop();" data-role="button" data-icon="delete" >Stop</a>
				</div>
				<span id="dbResetStatus"></span>
				
				<h3>API Access</h3>
				<div data-role="collapsible-set">
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Alerts Console Log</h3>
						
						<div data-role="controlgroup" data-type="horizontal">
							<a data-role="button" href="javascript:consoleLog.retrieve()">Retrieve</a>
							<a data-role="button" href="javascript:clearDiv('alertsConsoleLog')">Clear</a>
						</div>
						
						<div id="alertsConsoleLog">Ready...</div>
                    </div>
					
                    <div data-role="collapsible" data-collapsed="true">
                        <h3>Geolocation</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:geolocationObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:geolocationObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('geolocation')">Clear</a>
						</div>
							
						<div id="geolocation">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Localise</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:localisation.init()">Initialise</a>
							<a data-role="button" href="javascript:localisation.findNearestStation()">Find Nearest Station</a>
						</div>
						
						<div id="localisation">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Accelerometer</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:accelerometerObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:accelerometerObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('acceleration')">Clear</a>
						</div>
						
						<div id="acceleration">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Compass</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:compassObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:compassObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('compass')">Clear</a>
						</div>
						
						<div id="compass">Ready...</div>
                    </div>
                    
                    <div data-role="collapsible" data-collapsed="true">
                        <h3>Gyroscope</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:gyroscopeObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:gyroscopeObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('gyroscope')">Clear</a>
						</div>
						
						<div id="gyroscope">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Databases</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:storage.reset()">Reset</a>
							<a data-role="button" href="javascript:storage.getDBTables()">Show</a>
							<a data-role="button" href="javascript:clearDiv('databases')">Clear</a>
						</div>
						
						<div id="databases"></div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>User Notifications</h3>
						
						<div data-role="controlgroup" data-type="vertical">
							<a href="#" onclick="notifications.showAlert('Hello!','Game Over!','Damn'); return false;" data-role="button">Show Alert</a>
							<a href="#" onclick="notifications.localTimedAlert(10000); return false;" data-role="button">Show Notification in 10s</a>
							<a href="#" onclick="notifications.playBeep(3000); return false;" data-role="button">Play Beep</a>
							<a href="#" onclick="notifications.vibrate(); return false;" data-role="button">Vibrate</a>
							<a href="#" onclick="notifications.clear(); return false;" data-role="button">Clear All Notifications</a>
						</div>
                    </div>
                </div>
			</div><!-- /content -->
			
		</div><!-- /debugpage -->
		
		<!-- start of info page -->
		<div data-role="page" id="infopage" data-theme="c">
			
			<!-- header -->
			<div data-role="header" data-position="fixed">
				<h1>Vehicle Tracker</h1>
				<div data-role="navbar">
					<ul> 
						<li><a href="#startpage" data-prefetch="true">Start</a></li>
						<li><a href="#debugpage" data-prefetch="true">Debug</a></li>
						<li><a href="#infopage" class="ui-btn-active ui-state-persist" data-prefetch="true">Info</a></li>
					</ul>
				</div>
			</div><!-- /header -->
			
			<!-- content -->
			<div data-role="content" data-fullscreen="true" class="content">
				<div class="text">
					<h2 style="margin-top: 0;">Project info</h2>
					<p>Vehicle Tracker (V-Tracker) is a mobile application for ‘Realtime route learning and vehicle tracking using web-technologies on a mobile device’.</p>
		
					<br><p>V-Tracker is part of a research project in the Deparment of Electrical and Computer Systems Engineering (ECSE) at <a href="http://www.monash.edu" target="_blank">Monash University</a>, Australia.</p>
				
					<br><p>The software is open source. Check out the code repository and project wiki <a href="http://www.github.com/hadimichael/V-Tracker" target="_blank">here</a>.</p>			
				
					<h3>LICENSE (Apache 2.0)</h3>
					<p>Copyright (C) 2012 Hadi Michael</p>
		
					<br><p>Licensed under the Apache License, Version 2.0 (the "License");
					   you may not use this file except in compliance with the License.
					   You may obtain a copy of the License <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">here</a>.</p>
					
					<br><p>Unless required by applicable law or agreed to in writing, software
					   distributed under the License is distributed on an "AS IS" BASIS,
					   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
					   See the License for the specific language governing permissions and
					   limitations under the License.</p>	
			   </div>
			</div><!-- /content -->
		
		</div><!-- /infopage -->
		
		<!-- Start of trackingpage -->
		<div data-role="page" id="trackingpage" data-theme="c">
			<div data-role="header" data-position="fixed">
				<h1>Tracking</h1>
				<a href="#startpage" data-icon="check" data-theme="b" data-transition="none" class="ui-btn-right">Done</a>
			</div>
			
			<div data-role="content" class="ui-body">
				<span id="routeName"><h3>Route name</h3></span>
				
				<div id="map_canvas" style="width:100%; height:300px"></div>
			</div>
		</div><!-- /trackingpage -->
		
		<!-- Start of newroutedialog -->
		<div data-role="dialog" id="newroutedialog" data-theme="c">
			<div data-role="header" data-theme="d">
				<h1>New Route</h1>
			</div>
			
			<div data-role="content" class="ui-body">
				<label for="newRouteName">New route name:</label>
				<input type="text" id="newRouteName" placeholder="insert route name" value="" />				
				<a href="#" data-role="button" data-theme="b" data-transition="none">Start learning now</a> 
				<a href="#" data-role="button" data-rel="back" data-theme="c"data-transition="none">Cancel</a> 
			</div>
		</div><!-- /newroutedialog -->
		
		<!-- Start of routesdialog -->
		<div data-role="dialog" id="routesdialog" data-theme="c">
			<div data-role="header" data-theme="d">
				<h1>Routes nearby</h1>
			</div>
			
			<div data-role="content" class="ui-body">
				<fieldset data-role="controlgroup" id="routesNearby">
					<legend>Choose a route:</legend>
					<input type="radio" name="radio-choice" id="radio-choice-1" value="choice-1" checked="checked" />
					<label for="radio-choice-1">Route 1</label>
					
					<input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2"  />
					<label for="radio-choice-2">Route 2</label>
					
					<input type="radio" name="radio-choice" id="radio-choice-3" value="choice-3"  />
					<label for="radio-choice-3">Route 3</label>
				</fieldset>
				
				<a href="javascript:route.track();" data-role="button" data-theme="b" data-transition="none">Track me on route</a>
				<a href="#" data-role="button" data-theme="b" data-transition="none">Update route</a> 
				<a href="#" data-role="button" data-rel="back" data-theme="c"data-transition="none">Cancel</a>    
			</div>
		</div><!-- /routesdialog -->
		
		<!-- Start of loaderdialog -->
		<div data-role="dialog" id="loaderdialog" data-theme="c">
			<div data-role="header" data-theme="d">
				<h1>Working...</h1>
			</div>
			
			<div data-role="content" class="ui-body">
				<span id="stickyMessages"></span>
				
				<h2>Received messages</h2>
				<div id="alertsConsole"></div>
			</div>
		</div><!-- /loaderdialog -->
		
	</body>
	
</html>
