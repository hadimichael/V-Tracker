<!DOCTYPE html>
<html>
	
	<head>
		
		<title>Vehicle Tracker</title>
  
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
		<meta charset="utf-8" />
		
		<!-- set apple mobile settings for quicker debugging -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
			
		<!-- general css styling -->
		<link rel="stylesheet" href="styles/styles.css" type="text/css" />
				
		<!-- iPad/iPhone specific css below -->
		<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="styles/ipad.css" type="text/css" />		
		<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="styles/iphone.css" type="text/css" />
		
		<!-- js files: you would NEVER have so many separate files if you were serving the app through the internet! -->
		<!-- js helper scripts -->
		<script type="text/javascript" charset="utf-8" src="scripts/scripts.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/compatibility.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/geolocation.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/accelerometer.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/compass.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/gyroscope.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/storage.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/notifications.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/localisation.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/pathfit.js"></script>
			
		<!-- cordova dependancies + plugins -->
		<script type="text/javascript" charset="utf-8" src="libraries/cordova-1.6.1.js"></script>
		<script type="text/javascript" charset="utf-8" src="libraries/LocalNotification.js"></script>
	
		<!-- other library dependancies -->
		<script type="text/javascript" charset="utf-8" src="libraries/modernizr-2.5.3.js"></script>
		<script type="text/javascript" charset="utf-8" src="libraries/numeric-1.0.2.js"></script>
		
		<!-- jQuery.mobile dependancies -->		
		<link rel="stylesheet" href="jquery/jquery.mobile-1.1.0-rc.1.css" type="text/css" />
		<script type="text/javascript" src="jquery/jquery-1.7.1.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/jquery-mods.js"></script>
		<script type="text/javascript" src="jquery/jquery.mobile-1.1.0-rc.1.js"></script>
			
		<!-- jQuery.flot dependancies -->
		<script type="text/javascript" src="libraries/flot/jquery.flot.js"></script>
			
		<!-- onLoad scripts -->	
		<script type="text/javascript">
			function onBodyLoad() {	
				document.addEventListener("deviceready", onDeviceReady, false);
			}
			
			function onDeviceReady() {
				//We're ready to roll
				checkBrowserCompatibilities();
				storage.init();
				
				document.addEventListener("pause", onPause, false);
				document.addEventListener("resume", onResume, false);
			}
			
			function onPause() {
				//tell the user if GPS is still ON when the application is paused
				console.log("Device paused!");
				if (geolocationObj.watchID) {notifications.localTimedAlert(7000);}
			}
			
			function onResume() {
				console.log("Device resumed!");
				notifications.clear();
			}
		</script>
			
	</head>

	<body onload="onBodyLoad()">
		
		<!-- Start of homepage -->
		<div data-role="page" id="homepage" data-theme="c">
			
			<div data-role="header" data-position="fixed">
				<a data-icon="refresh" data-theme="a" onClick="window.location.reload();" style="visibility: hidden;">Reload</a>
				<h1>Vehicle Tracker</h1>
				<a data-icon="info" data-theme="b" href="info.html" data-transition="slide" class="ui-btn-right" data-prefetch>Info</a>
			</div><!-- /header -->
			
			<div data-role="content" data-fullscreen="true">
				<div id="loader" style="visibility: hidden">
					<div id="closeButton">
						<a href="javascript:document.getElementById('loader').style.visibility = 'hidden';">
							<img src="jquery/images/close.png">
						</a>
					</div>
					
					<div id="processStatus">
						<p>Process is running
						<br><img src="jquery/images/bar-loader.gif"></p>
					</div>
					
					<div data-role="controlgroup" data-type="horizontal">
						<a data-role="button" data-icon="check" href="javascript:dataCollection.stop();">Stop DC</a>
					</div>
					
					<p>Received messages</p>
					<div id="alertsConsole"></div>
				</div>
				
				<h2 style="margin-top: 0;">Data-Collection</h2>					
				<div data-role="controlgroup" data-type="horizontal">
					<a href="javascript:dataCollection.init();" data-role="button" data-icon="">Init</a>
					<a href="javascript:dataCollection.start();" data-role="button" data-icon="arrow-r">Collect Data</a>
				</div>
				<span id="dbResetStatus"></span>
				
				<h2 style="margin-top: 0;">Route learning</h2>
				<div data-role="controlgroup" data-type="horizontal">
					<a href="javascript:pathFit();" data-role="button" data-icon="">Fit</a>
				</div>
				<div id="graphPlaceholder" style="width:280px;height:300px;display:none;"></div>
				
				<h2>Debugging Access</h2>
				<div data-role="collapsible-set">
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Alerts Console Log</h3>
						
						<div data-role="controlgroup" data-type="horizontal">
							<a data-role="button" href="javascript:consoleLog.retrieve()">Retrieve</a>
							<a data-role="button" href="javascript:clearDiv('alertsConsoleLog')">Clear</a>
						</div>
						
						<div id="alertsConsoleLog">Ready...</div>
                    </div>
					
                    <div data-role="collapsible" data-collapsed="true">
                        <h3>Geolocation</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:geolocationObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:geolocationObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('geolocation')">Clear</a>
						</div>
							
						<div id="geolocation">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Localise</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:localisation.init()">Initialise</a>
							<a data-role="button" href="javascript:localisation.findNearestStation()">Find Nearest Station</a>
						</div>
						
						<div id="localisation">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Accelerometer</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:accelerometerObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:accelerometerObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('acceleration')">Clear</a>
						</div>
						
						<div id="acceleration">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Compass</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:compassObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:compassObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('compass')">Clear</a>
						</div>
						
						<div id="compass">Ready...</div>
                    </div>
                    
                    <div data-role="collapsible" data-collapsed="true">
                        <h3>Gyroscope</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:gyroscopeObj.startWatching()">Watch</a>
							<a data-role="button" href="javascript:gyroscopeObj.stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('gyroscope')">Clear</a>
						</div>
						
						<div id="gyroscope">Ready...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Databases</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:storage.reset()">Reset</a>
							<a data-role="button" href="javascript:storage.getDBTables()">Show</a>
							<a data-role="button" href="javascript:clearDiv('databases')">Clear</a>
						</div>
						
						<div id="databases"></div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>User Notifications</h3>
						
						<div data-role="controlgroup" data-type="vertical">
							<a href="#" onclick="notifications.showAlert('Hello!','Game Over!','Damn'); return false;" data-role="button">Show Alert</a>
							<a href="#" onclick="notifications.localTimedAlert(10000); return false;" data-role="button">Show Notification in 10s</a>
							<a href="#" onclick="notifications.playBeep(3000); return false;" data-role="button">Play Beep</a>
							<a href="#" onclick="notifications.vibrate(); return false;" data-role="button">Vibrate</a>
							<a href="#" onclick="notifications.clear(); return false;" data-role="button">Clear All Notifications</a>
						</div>
                    </div>
                </div>
			</div><!-- /content -->
			
		</div><!-- /homepage -->

	</body>
	
</html>
