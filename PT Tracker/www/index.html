<!DOCTYPE html>
<html>
	
	<head>
		
		<title>Public Transport Tracker</title>
  
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
		<meta charset="utf-8" />
		
		<!-- set apple mobile settings for quicker debugging -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
			
		<!-- general css styling -->
		<link rel="stylesheet" href="styles/styles.css" type="text/css" />
			
		<!-- iPad/iPhone specific css below -->
		<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="styles/ipad.css" type="text/css" />		
		<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="styles/iphone.css" type="text/css" />
		
		<!-- js helper scripts -->
		<script type="text/javascript" charset="utf-8" src="scripts/scripts.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/compatibility.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/geolocation.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/accelerometer.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/compass.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/storage.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/notifications.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/localisation.js"></script>
			
		<!-- cordova dependancies -->
		<script type="text/javascript" charset="utf-8" src="libraries/cordova-1.6.1.js"></script>
	
		<!-- other library dependancies -->
		<script type="text/javascript" charset="utf-8" src="libraries/modernizr-2.5.3.js"></script>
		
		<!-- jQuery.mobile dependancies -->		
		<link rel="stylesheet" href="jquery/jquery.mobile-1.1.0-rc.1.css" type="text/css" />
		<script type="text/javascript" src="jquery/jquery-1.7.1.js"></script>
		<script type="text/javascript" charset="utf-8" src="scripts/jquery-mods.js"></script>
		<script type="text/javascript" src="jquery/jquery.mobile-1.1.0-rc.1.js"></script>		
			
		<!-- load scripts -->	
		<script type="text/javascript">
			function onBodyLoad() {		
				document.addEventListener("deviceready", onDeviceReady, false);
			}
			
			function onDeviceReady() {
				//We're ready to roll
				checkBrowserCompatibilities();
				storage_init();
			}
		</script>
			
	</head>

	<body onload="onBodyLoad()">
		
		<!-- Start of homepage -->
		<div data-role="page" id="homepage" data-theme="c">
			
			<div data-role="header" data-position="fixed">
				<a data-icon="refresh" data-theme="a" onClick="window.location.reload();" style="visibility: hidden;">Reload</a>
				<h1>PT Tracker</h1>
				<a data-icon="info" data-theme="b" href="info.html" data-transition="slide" class="ui-btn-right" data-prefetch>Info</a>
			</div><!-- /header -->
			
			<div data-role="content" data-fullscreen="true">
				<div id="loader" style="visibility: hidden">
					<div id="processStatus">
						<p>Process is running
						<br><img src="jquery/images/bar-loader.gif"></p>
					</div>
					
					<div data-role="controlgroup" data-type="horizontal">
						<a data-role="button" data-icon="check" href="javascript:stopDataCollection();">Done</a>
					</div>
					
					<p>Received messages</p>
					<div id="alertsConsole"></div>
				</div>
				
				<h2 style="margin-top: 0;">Data-Collection</h2>					
				<div data-role="controlgroup" data-type="horizontal">
					<a href="javascript:initDataCollection();" data-role="button" data-icon="">Reset</a>
					<a href="javascript:startDataCollection();" data-role="button" data-icon="arrow-r">Collect Data</a>
				</div>
				<span id="dbResetStatus"></span>

				<h2>Debugging Access</h2>
				<div data-role="collapsible-set">
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Alerts Console Log</h3>
						
						<div data-role="controlgroup" data-type="horizontal">
							<a data-role="button" href="javascript:displayAlertsConsoleLog()">Retrieve</a>
							<a data-role="button" href="javascript:clearDiv('alertsConsoleLog')">Clear</a>
						</div>
						
						<div id="alertsConsoleLog">Waiting for a retrieve request...</div>
                    </div>
					
                    <div data-role="collapsible" data-collapsed="true">
                        <h3>GeoLocation</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:geoLocation_startWatching()">Watch</a>
							<a data-role="button" href="javascript:geoLocation_stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('geolocation')">Clear</a>
						</div>
							
						<div id="geolocation">Waiting for GPS to start...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Localise</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:localisation_init()">Initialise</a>
							<a data-role="button" href="javascript:localisation_findStation()">Find Nearest Station</a>
						</div>
						
						<div id="localisation">Waiting...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Acceleration</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:accelerometer_startWatching()">Watch</a>
							<a data-role="button" href="javascript:accelerometer_stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('acceleration')">Clear</a>
						</div>
						
						<div id="acceleration">Waiting for accelerometer start...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Compass</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:compass_startWatching()">Watch</a>
							<a data-role="button" href="javascript:compass_stopWatching()">Stop</a>
							<a data-role="button" href="javascript:clearDiv('compass')">Clear</a>
						</div>
						
						<div id="compass">Waiting for compass start...</div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>Databases</h3>
						
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a data-role="button" href="javascript:storage_clear()">Reset</a>
							<a data-role="button" href="javascript:storage_show()">Show</a>
							<a data-role="button" href="javascript:clearDiv('databases')">Clear</a>
						</div>
						
						<div id="databases"></div>
                    </div>
					
					<div data-role="collapsible" data-collapsed="true">
                        <h3>User Notifications</h3>
						
						<div data-role="controlgroup" data-type="vertical">
							<a href="#" onclick="notifications_showAlert(); return false;" data-role="button">Show Alert</a>
							<a href="#" onclick="notifications_playBeep(); return false;" data-role="button">Play Beep</a>
							<a href="#" onclick="notifications_vibrate(); return false;" data-role="button">Vibrate</a>
						</div>
                    </div>
                </div>
			</div><!-- /content -->
			
		</div><!-- /homepage -->

	</body>
	
</html>
